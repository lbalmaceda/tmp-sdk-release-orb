description: >
  Publishes the package to NPM, if required.

executor: node

parameters:
  npm-token-key:
    type: env_var_name
    default: NPM_TOKEN
    description: "The name of the environment variable with the Npm Automation Token"
  pkg-manager:
    type: enum
    default: npm
    description: "Default node package manager to use"
    enum:
      - npm
      - yarn

steps:
  - checkout
  - node-install-packages:
      pkg-manager: <<parameters.pkg-manager>>
  - node-publish:
      npm-token-key: <<parameters.npm-token-key>>
      pkg-manager: <<parameters.pkg-manager>>
  # - github-release
