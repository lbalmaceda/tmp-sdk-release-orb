description: >
  Install the project dependencies using cache best-practices and runs the given commands.

parameters:
  after-deps:
    type: steps
    default: []
    description: "Steps that will be executed after dependencies are installed"
  install-command:
    type: string
    default: ""
    description: "Command used to install dependencies"
  pkg-manager:
    type: enum
    default: npm
    description: "Default node package manager to use"
    enum:
      - npm
      - yarn

steps:
  - node/install-packages:
      override-ci-command: <<parameters.install-command>>
      pkg-manager: <<parameters.pkg-manager>>
  - steps: <<parameters.after-deps>>
