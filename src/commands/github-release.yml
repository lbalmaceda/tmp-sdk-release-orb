description: >
  This command verifies if the version in the package.json file is
  already published, and if not, it will attempt to publish it to Github.

parameters:
  gh-token-key:
    type: env_var_name
    default: GH_TOKEN
    description: "The name of the environment variable with the Github Access Token"
  prefix-tag:
    type: boolean
    default: true
    description: "Whether to prefix the tag name with a 'v' or not"

steps:
  - run:
      environment:
        GH_TOKEN_KEY: <<parameters.gh-token-key>>
        PREFIX_TAG: <<parameters.prefix-tag>>
      name: Check package version and publish to Github if required
      command: <<include(scripts/make-github-release.sh)>>
